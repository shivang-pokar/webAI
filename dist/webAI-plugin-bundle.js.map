{"version":3,"file":"webAI-plugin-bundle.js","sources":["../src/mainObject.ts","../src/webAI-service.ts","../src/core/core.ts","../src/webAI-plugin.ts"],"sourcesContent":["export class CommandObj {\n    baseCommandValid: boolean;\n    baseCommand: string;\n    actionUrlCommand: string;\n}\n\nexport class CallBackObject {\n    actionCommand: string;\n}","/** Example service class */\nimport { CallBackObject, CommandObj } from './mainObject';\nconst { webkitSpeechRecognition } = (window as any);\n\nexport class WebAIPluginServices {\n  /**\n   * Returns a webkitSpeechRecognition.\n   * @param recognition\n   */\n  webkitSpeechRecognition() {\n    var recognition = new webkitSpeechRecognition();\n    recognition.continuous = true;\n    recognition.interimResults = true;\n    return recognition;\n  }\n\n  checkBaseCommand(event: any, options: WebAIPluginOptions, mainObject: CommandObj): CommandObj {\n\n    if (event.results[event.results.length - 1][0].transcript.toLocaleLowerCase().trim() == options.baseCommand.toLocaleLowerCase()) {\n      mainObject.baseCommandValid = true;\n      mainObject.baseCommand = options.baseCommand.toLocaleLowerCase();\n    }\n    return mainObject;\n  }\n\n  trigerAction(options: WebAIPluginOptions, voiceCommand: string, commandObj: CommandObj): CommandObj {\n    let webAIAnimate = document.getElementById('webAI-animate');\n    webAIAnimate.classList.add('voice-active');\n    options.command.forEach((resp) => {\n      resp.actionCommand.forEach(actionCommand => {\n        if (voiceCommand.indexOf(actionCommand.trim().toLocaleLowerCase()) != -1) {\n          commandObj.actionUrlCommand = actionCommand.trim();\n          let callBackObject: CallBackObject = new CallBackObject();\n          callBackObject.actionCommand = voiceCommand;\n\n          let isDefaultKey = this.checkDefaultKeyWordk(voiceCommand);\n          if (!isDefaultKey) {\n            commandObj.baseCommandValid = false;\n          }\n          if (resp.pageSlug) {\n            window.location.href = options.siteUrl + '/' + resp.pageSlug\n          }\n          else {\n            return resp.callback.call(this, callBackObject);\n          }\n        }\n        else {\n          this.checkDefaultBackCommand(voiceCommand)\n        }\n      });\n    });\n\n    var timeout = setTimeout(() => {\n      commandObj.baseCommandValid = false;\n      webAIAnimate.classList.remove('voice-active');\n      clearTimeout(timeout);\n    }, options.timeOut * 1000);\n\n    return commandObj;\n  }\n\n  appendHTML() {\n    let aiSVG = `<svg id=\"webAI-svg\" width=\"300\" height=\"300\" xmlns=\"http://www.w3.org/2000/svg\" filter=\"url(#goo)\"><defs><filter id=\"goo\"><feGaussianBlur in=\"SourceGraphic\" stdDeviation=\"10\" result=\"blur\"></feGaussianBlur><feColorMatrix in=\"blur\" mode=\"matrix\" values=\"1 0 0 0 0 0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9\" result=\"goo\"></feColorMatrix><feComposite in=\"SourceGraphic\" in2=\"goo\" operator=\"atop\"></feComposite></filter></defs><circle id=\"Circle1\"></circle><circle id=\"Circle2\"></circle><circle id=\"Circle3\"></circle><circle id=\"Circle4\"></circle><text x=\"110\" y=\"175\" class=\"small\" style=\"fill: #fff;font-size: 80px;font-family: Arial;\">AI</text></svg>`;\n    var node = document.createElement(\"div\");\n    node.id = 'webAI-animate';\n    node.innerHTML = aiSVG;\n    document.body.appendChild(node);\n    document.head.insertAdjacentHTML(\"beforeend\", `<style>#webAI-animate{position:fixed; bottom:0px; right:0px; width:150px; height:150px; transform: translate(40px, 30px); opacity: 0; visibility: hidden; transition: 0.5s ease all;}#webAI-animate.voice-active{transform: translate(0px, 0px); opacity: 1; visibility: visible;}#webAI-svg{transform: scale(0.4); transform-origin: left top;}#webAI-svg, #webAI-svg circle {fill: #1F9DEA;}#webAI-svg #Circle1 {animation: from0to360 1s linear infinite;cx: 150;cy: 145;r: 100;transform-origin: 145px 150px;}#webAI-svg #Circle2 {animation: from360to0 2s linear infinite;cx: 150;cy: 155;r: 100;transform-origin: 155px 150px;}#webAI-svg #Circle3 {animation: from0to360 3s linear infinite;cx: 145;cy: 150;r: 100;transform-origin: 150px 145px;}#webAI-svg #Circle4 {animation: from360to0 2.5s linear infinite;cx: 155;cy: 150;r: 100;transform-origin: 150px 155px;}@keyframes from360to0 {from{transform:rotate(360deg);}to{transform:rotate(0deg);}}</style>`)\n  }\n\n\n  checkDefaultKeyWordk(action: string): boolean {\n    let defaultKey = ['search'];\n    let isDefault: boolean = false;\n    defaultKey.forEach(keys => {\n      if (action.indexOf(keys.trim().toLocaleLowerCase()) != -1) {\n        isDefault = true;\n      }\n    })\n    return isDefault;\n  }\n\n  checkDefaultBackCommand(action: string): boolean {\n    let defaultCommand = ['go back', 'go back to page', 'go to previous page'];\n    let isDefaultCommand: boolean = false;\n    defaultCommand.forEach(keys => {\n      if (action.indexOf(keys.trim().toLocaleLowerCase()) != -1) {\n        history.back();\n        isDefaultCommand = true;\n      }\n    })\n    return isDefaultCommand;\n  }\n\n\n}\n","import { WebAIPluginServices } from '../webAI-service';\nimport { CommandObj, CallBackObject } from '../mainObject';\n\n\nexport class webAIPlugin {\n    constructor(options: WebAIPluginOptions,) {\n        let webAIPluginServices = new WebAIPluginServices();\n        let commandObj: CommandObj = new CommandObj();\n\n        /* To Append HTML */\n        webAIPluginServices.appendHTML();\n        let recognition = webAIPluginServices.webkitSpeechRecognition();\n        document.getElementById(\"webAI-animate\").addEventListener('click', function () {\n            recognition.start();\n        });\n\n        recognition.onresult = (event: any) => {\n            if (commandObj.baseCommandValid) {\n                var voiceCommand = event.results[event.results.length - 1][0].transcript.toLocaleLowerCase().trim();\n                commandObj = webAIPluginServices.trigerAction(options, voiceCommand, commandObj)\n            }\n\n            if (!commandObj.baseCommandValid) {\n                commandObj = webAIPluginServices.checkBaseCommand(event, options, commandObj);\n            }\n        };\n        recognition.start();\n        recognition.onend = function () {\n            recognition.start();\n        }\n    }\n}","import { webAIPlugin } from './core/core';\n\n\nvar webAI = (options: WebAIPluginOptions) => {\n  if (!options.timeOut) {\n    options.timeOut = 5;\n  }\n  return new webAIPlugin(options);\n}\n\nexport default webAI;\n"],"names":["window","webkitSpeechRecognition","recognition","continuous","interimResults","event","options","mainObject","results","length","transcript","toLocaleLowerCase","trim","baseCommand","baseCommandValid","voiceCommand","commandObj","webAIAnimate","document","getElementById","classList","add","command","forEach","resp","actionCommand","indexOf","actionUrlCommand","callBackObject","CallBackObject","isDefaultKey","checkDefaultKeyWordk","pageSlug","location","href","siteUrl","callback","call","checkDefaultBackCommand","timeout","setTimeout","remove","clearTimeout","timeOut","aiSVG","node","createElement","id","innerHTML","body","appendChild","head","insertAdjacentHTML","action","defaultKey","isDefault","keys","defaultCommand","isDefaultCommand","history","back","webAIPluginServices","WebAIPluginServices","CommandObj","appendHTML","addEventListener","start","onresult","trigerAction","checkBaseCommand","onend","webAI","webAIPlugin"],"mappings":"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"}